<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T·∫°o Giao d·ªãch Chi - Prototype</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #f8f9fa;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }

        /* Top Header */
        .top-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 65px;
            background-color: #2c3e50;
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-title {
            font-size: 16px;
            font-weight: 500;
            color: white;
        }

        .header-buttons {
            display: flex;
            gap: 10px;
        }

        .header-buttons button {
            padding: 8px 16px;
            font-size: 13px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-save {
            background-color: #28a745;
            color: white;
        }

        .btn-save:hover {
            background-color: #218838;
            color: white;
        }

        .btn-close-header {
            background-color: #dc3545;
            color: white;
        }

        .btn-close-header:hover {
            background-color: #c82333;
            color: white;
        }

        .btn-diagram {
            background-color: #17a2b8;
            color: white;
        }

        .btn-diagram:hover {
            background-color: #138496;
            color: white;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 65px;
            width: 250px;
            height: calc(100vh - 65px);
            background-color: #f8f9fa;
            border-right: 1px solid #ddd;
            overflow-y: auto;
            z-index: 900;
            padding: 20px 0;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-item {
            padding: 0;
            margin: 0;
        }

        .sidebar-link {
            display: block;
            padding: 12px 20px;
            color: #333;
            text-decoration: none;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .sidebar-link:hover {
            background-color: #e9ecef;
            border-left-color: #007bff;
        }

        .sidebar-link.active {
            background-color: #e7f3ff;
            border-left-color: #007bff;
            color: #007bff;
            font-weight: 600;
        }

        .sidebar-toggle {
            display: block;
            padding: 12px 20px;
            color: #333;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            border-left: 3px solid transparent;
        }

        .sidebar-toggle:hover {
            background-color: #e9ecef;
            border-left-color: #007bff;
        }

        .sidebar-submenu {
            list-style: none;
            margin: 0;
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s;
        }

        .sidebar-submenu.show {
            max-height: 500px;
        }

        .sidebar-submenu .sidebar-item {
            padding-left: 10px;
        }

        /* Main Content */
        .main-content {
            margin-left: 250px;
            margin-top: 65px;
            padding: 20px;
            min-height: calc(100vh - 65px);
        }

        .form-container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 900px;
        }

        .form-heading {
            font-size: 22px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #007bff;
        }

        .section-title {
            font-weight: 600;
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
            font-size: 14px;
        }

        .required {
            color: #dc3545;
        }

        .warning-alert {
            background-color: #fff3cd;
            border-color: #ffc107;
            color: #856404;
            border: 1px solid #ffc107;
            border-radius: 4px;
            padding: 12px 15px;
            margin-bottom: 20px;
        }

        .alert-info {
            background-color: #e7f3ff;
            border-color: #2196F3;
            color: #01579b;
            border: 1px solid #2196F3;
            border-radius: 4px;
            padding: 15px;
            margin-top: 20px;
        }

        .alert-info h6 {
            margin-bottom: 10px;
            margin-top: 0;
        }

        .alert-info ul {
            margin-bottom: 0;
            padding-left: 20px;
        }

        .alert-info li {
            margin-bottom: 5px;
        }

        .form-label {
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .form-control, .form-select {
            border-radius: 4px;
            border: 1px solid #ced4da;
            font-size: 13px;
        }

        .form-control:focus, .form-select:focus {
            border-color: #80bdff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        .form-control:disabled, .form-select:disabled {
            background-color: #e9ecef;
            opacity: 1;
        }

        .row {
            margin-bottom: 5px;
        }

        .form-footer {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }

        .form-footer button, .form-footer a {
            padding: 10px 20px;
            font-size: 13px;
            border-radius: 4px;
        }

        .btn-warning {
            background-color: #ffc107;
            color: #333;
            border: none;
        }

        .btn-warning:hover {
            background-color: #e0a800;
            color: #333;
        }

        .btn-danger {
            background-color: #dc3545;
            color: white;
            border: none;
        }

        .btn-danger:hover {
            background-color: #c82333;
            color: white;
        }

        .btn-outline-secondary {
            border-color: #6c757d;
            color: #6c757d;
        }

        .btn-outline-secondary:hover {
            background-color: #6c757d;
            border-color: #6c757d;
            color: white;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
            }

            .main-content {
                margin-left: 200px;
            }

            .header-buttons {
                gap: 5px;
            }

            .header-buttons button {
                padding: 6px 12px;
                font-size: 11px;
            }
        }

        @media (max-width: 576px) {
            .sidebar {
                width: 100%;
                position: relative;
                height: auto;
                border-right: none;
                border-bottom: 1px solid #ddd;
            }

            .main-content {
                margin-left: 0;
            }

            .form-footer {
                flex-direction: column-reverse;
            }

            .form-footer button, .form-footer a {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Top Header -->
    <div class="top-header">
        <div class="header-title">üí∏ T·∫°o Giao d·ªãch Chi Ti·ªÅn</div>
        <div class="header-buttons">
            <button class="btn-save">L∆∞u Nh√°p</button>
            <button class="btn-close-header">ƒê√≥ng</button>
            <button class="btn-diagram">S∆° ƒë·ªì</button>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <ul class="sidebar-menu">
            <li class="sidebar-item">
                <a href="#" class="sidebar-link">üè† Home</a>
            </li>
            <li class="sidebar-item">
                <div class="sidebar-toggle" onclick="toggleSubmenu(this)">
                    üí∞ Cashflow <span>‚ñº</span>
                </div>
                <ul class="sidebar-submenu show">
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link">üì• Cash inflow</a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link active">üì§ Cash outflow</a>
                    </li>
                </ul>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link">üìä Reports</a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link">‚öôÔ∏è Settings</a>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="form-container">
            <div class="form-heading">üí∏ T·∫°o Giao d·ªãch Chi Ti·ªÅn</div>

            <!-- Warning Alert -->
            <div class="warning-alert">
                <strong>‚ö†Ô∏è L∆∞u √Ω:</strong> Giao d·ªãch chi c·∫ßn ph√™ duy·ªát t·ª´ Tr∆∞·ªüng ph√≤ng K·∫ø to√°n v√† Gi√°m ƒë·ªëc tr∆∞·ªõc khi th·ª±c hi·ªán thanh to√°n.
            </div>

            <form id="cashOutForm">
                <!-- Section 1: Th√¥ng tin giao d·ªãch -->
                <div class="section-title">Th√¥ng tin giao d·ªãch</div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="transactionDate" class="form-label">Ng√†y giao d·ªãch <span class="required">*</span></label>
                        <input type="date" class="form-control" id="transactionDate" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="expenseCategory" class="form-label">Lo·∫°i chi ph√≠ <span class="required">*</span></label>
                        <select class="form-select" id="expenseCategory" required>
                            <option value="">-- Ch·ªçn lo·∫°i chi ph√≠ --</option>
                            <option>L∆∞∆°ng & Ph√∫c l·ª£i</option>
                            <option>Chi ph√≠ v·∫≠n h√†nh</option>
                            <option>Chi ph√≠ qu·∫£n l√Ω</option>
                            <option>Chi ph√≠ ti·∫øp th·ªã</option>
                            <option>Mua v·∫≠t t∆∞ / H√†ng h√≥a</option>
                            <option>Thanh to√°n h·ª£p ƒë·ªìng / D·ªãch v·ª•</option>
                            <option>Chi kh√°c</option>
                        </select>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="transactionAmount" class="form-label">S·ªë ti·ªÅn <span class="required">*</span></label>
                        <input type="number" class="form-control" id="transactionAmount" placeholder="0" required>
                        <small class="text-muted">ƒê∆°n v·ªã: VNƒê</small>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="paymentMethod" class="form-label">Ph∆∞∆°ng th·ª©c thanh to√°n <span class="required">*</span></label>
                        <select class="form-select" id="paymentMethod" required>
                            <option value="">-- Ch·ªçn ph∆∞∆°ng th·ª©c --</option>
                            <option>Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
                            <option>Ti·ªÅn m·∫∑t</option>
                            <option>S√©c</option>
                            <option>Kh√°c</option>
                        </select>
                    </div>
                </div>

                <!-- Section 2: Th√¥ng tin ng∆∞·ªùi nh·∫≠n -->
                <div class="section-title">Th√¥ng tin ng∆∞·ªùi/ƒê∆°n v·ªã nh·∫≠n ti·ªÅn</div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="recipientName" class="form-label">T√™n ng∆∞·ªùi/C√¥ng ty nh·∫≠n ti·ªÅn <span class="required">*</span></label>
                        <input type="text" class="form-control" id="recipientName" placeholder="VD: C√¥ng ty Cung C·∫•p ABC" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="recipientPhone" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                        <input type="tel" class="form-control" id="recipientPhone" placeholder="0987654321">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="recipientEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="recipientEmail" placeholder="email@example.com">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="recipientTaxId" class="form-label">M√£ s·ªë thu·∫ø / S·ªë ƒë·ªãnh danh</label>
                        <input type="text" class="form-control" id="recipientTaxId" placeholder="0123456789">
                    </div>
                </div>

                <!-- Section 3: Th√¥ng tin t√†i kho·∫£n thanh to√°n -->
                <div class="section-title">Th√¥ng tin t√†i kho·∫£n thanh to√°n</div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="bankAccount" class="form-label">T√†i kho·∫£n thanh to√°n <span class="required">*</span></label>
                        <select class="form-select" id="bankAccount" required onchange="updateBankBalance()">
                            <option value="">-- Ch·ªçn t√†i kho·∫£n --</option>
                            <option data-balance="2500000000">VCB - 0123456789 (Vietcombank) - S·ªë d∆∞: 2,500,000,000 ‚Ç´</option>
                            <option data-balance="500000000">ACB - 0987654321 (√Å Ch√¢u Bank) - S·ªë d∆∞: 500,000,000 ‚Ç´</option>
                            <option data-balance="1200000000">VIB - 1234567890 (VIB) - S·ªë d∆∞: 1,200,000,000 ‚Ç´</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="bankBalance" class="form-label">S·ªë d∆∞ t√†i kho·∫£n</label>
                        <input type="text" class="form-control" id="bankBalance" placeholder="T·ª± ƒë·ªông ƒëi·ªÅn" disabled>
                    </div>
                </div>

                <!-- Section 4: Th√¥ng tin chi ti·∫øt -->
                <div class="section-title">Th√¥ng tin chi ti·∫øt</div>

                <div class="mb-3">
                    <label for="description" class="form-label">M√¥ t·∫£ chi ti√™u / N·ªôi dung thanh to√°n <span class="required">*</span></label>
                    <textarea class="form-control" id="description" rows="3" placeholder="VD: Chi tr·∫£ ti·ªÅn l∆∞∆°ng nh√¢n vi√™n th√°ng 10 nƒÉm 2024..." required></textarea>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="invoiceNumber" class="form-label">S·ªë h√≥a ƒë∆°n / S·ªë ch·ª©ng t·ª´</label>
                        <input type="text" class="form-control" id="invoiceNumber" placeholder="VD: Hƒê-2024-001">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="referenceDocument" class="form-label">Li√™n quan ƒë·∫øn t√†i li·ªáu</label>
                        <input type="text" class="form-control" id="referenceDocument" placeholder="VD: Hƒê-2024-001">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="department" class="form-label">B·ªô ph·∫≠n ch·ªãu tr√°ch nhi·ªám</label>
                        <select class="form-select" id="department">
                            <option>-- Ch·ªçn b·ªô ph·∫≠n --</option>
                            <option>Nh√¢n s·ª±</option>
                            <option>Kinh doanh</option>
                            <option>V·∫≠n h√†nh</option>
                            <option>Qu·∫£n l√Ω</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="project" class="form-label">D·ª± √°n / Chi ph√≠</label>
                        <input type="text" class="form-control" id="project" placeholder="VD: PRJ-2024-001">
                    </div>
                </div>

                <!-- Section 5: Ph√™ duy·ªát -->
                <div class="section-title">Ph√™ duy·ªát</div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="requester" class="form-label">Ng∆∞·ªùi y√™u c·∫ßu</label>
                        <input type="text" class="form-control" id="requester" placeholder="T·ª± ƒë·ªông ƒëi·ªÅn" disabled>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="approver1" class="form-label">Tr∆∞·ªüng ph√≤ng K·∫ø to√°n <span class="required">*</span></label>
                        <select class="form-select" id="approver1" required>
                            <option value="">-- Ch·ªçn ng∆∞·ªùi duy·ªát --</option>
                            <option>Nguy·ªÖn VƒÉn A</option>
                            <option>Tr·∫ßn Th·ªã B</option>
                            <option>L√™ VƒÉn C</option>
                        </select>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="approver2" class="form-label">Gi√°m ƒë·ªëc <span class="required">*</span></label>
                        <select class="form-select" id="approver2" required>
                            <option value="">-- Ch·ªçn ng∆∞·ªùi duy·ªát --</option>
                            <option>ƒêinh VƒÉn D</option>
                            <option>Ph·∫°m Th·ªã E</option>
                        </select>
                    </div>
                </div>

                <!-- Section 6: T√†i li·ªáu h·ªó tr·ª£ -->
                <div class="section-title">T√†i li·ªáu h·ªó tr·ª£</div>

                <div class="mb-3">
                    <label for="attachments" class="form-label">T·∫£i l√™n t√†i li·ªáu (H√≥a ƒë∆°n, Ch·ª©ng t·ª´, ƒê∆°n, v.v...)</label>
                    <input type="file" class="form-control" id="attachments" multiple>
                    <small class="text-muted">Cho ph√©p: PDF, Excel, Image (Max 5MB/file)</small>
                </div>

                <!-- Ghi ch√∫ -->
                <div class="mb-3">
                    <label for="notes" class="form-label">Ghi ch√∫ th√™m</label>
                    <textarea class="form-control" id="notes" rows="2" placeholder="Ghi ch√∫ n·ªôi b·ªô"></textarea>
                </div>

                <!-- Form Footer -->
                <div class="form-footer">
                    <a href="1_transaction-list.html" class="btn btn-outline-secondary">H·ªßy</a>
                    <button type="reset" class="btn btn-outline-secondary">X√≥a</button>
                    <button type="submit" class="btn btn-warning">L∆∞u Nh√°p</button>
                    <button type="submit" class="btn btn-danger">T·∫°o & G·ª≠i Duy·ªát</button>
                </div>
            </form>

            <!-- Validation Note -->
            <div class="alert-info">
                <h6>üí° Quy t·∫Øc ki·ªÉm tra:</h6>
                <ul>
                    <li>C√°c tr∆∞·ªùng c√≥ d·∫•u <span class="required">*</span> l√† b·∫Øt bu·ªôc</li>
                    <li>S·ªë ti·ªÅn ph·∫£i > 0 v√† <= S·ªë d∆∞ t√†i kho·∫£n</li>
                    <li>C·∫ßn ph√™ duy·ªát t·ª´ √≠t nh·∫•t 2 ng∆∞·ªùi (Tr∆∞·ªüng ph√≤ng K·∫ø to√°n & Gi√°m ƒë·ªëc)</li>
                    <li>Khi nh·∫•n "T·∫°o & G·ª≠i Duy·ªát", giao d·ªãch s·∫Ω ƒë∆∞·ª£c g·ª≠i ƒë·∫øn ng∆∞·ªùi duy·ªát ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Toggle sidebar submenu
        function toggleSubmenu(element) {
            const submenu = element.nextElementSibling;
            const arrow = element.querySelector('span');

            submenu.classList.toggle('show');

            if (submenu.classList.contains('show')) {
                arrow.textContent = '‚ñ≤';
            } else {
                arrow.textContent = '‚ñº';
            }
        }

        // Update bank balance when account is selected
        function updateBankBalance() {
            const bankAccountSelect = document.getElementById('bankAccount');
            const bankBalanceInput = document.getElementById('bankBalance');

            const selectedOption = bankAccountSelect.options[bankAccountSelect.selectedIndex];
            const balance = selectedOption.getAttribute('data-balance');

            if (balance) {
                const balanceNumber = parseInt(balance);
                bankBalanceInput.value = new Intl.NumberFormat('vi-VN').format(balanceNumber) + ' ‚Ç´';
            } else {
                bankBalanceInput.value = '';
            }
        }

        // Set today's date as default
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('transactionDate').value = today;

            // Auto-fill requester name (in real scenario, this would come from session)
            document.getElementById('requester').value = 'Current User (Auto-filled)';

            // Set default transaction amount placeholder
            document.getElementById('transactionAmount').addEventListener('input', function() {
                const amount = this.value;
                const balance = document.getElementById('bankBalance').value;

                if (amount && balance) {
                    // Validate amount vs balance
                    const amountNum = parseInt(amount);
                    const balanceNum = parseInt(balance.replace(/[^\d]/g, ''));

                    if (amountNum > balanceNum) {
                        this.style.borderColor = '#dc3545';
                        this.title = 'S·ªë ti·ªÅn v∆∞·ª£t qu√° s·ªë d∆∞ t√†i kho·∫£n!';
                    } else {
                        this.style.borderColor = 'ced4da';
                        this.title = '';
                    }
                }
            });

            // Form submission handler
            document.getElementById('cashOutForm').addEventListener('submit', function(e) {
                e.preventDefault();

                const formData = new FormData(this);
                console.log('Form submitted with data:', Object.fromEntries(formData));

                // Show success message
                alert('Giao d·ªãch ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω. S·∫Ω chuy·ªÉn h∆∞·ªõng sang danh s√°ch giao d·ªãch.');

                // Redirect to transaction list after 2 seconds
                setTimeout(() => {
                    window.location.href = '1_transaction-list.html';
                }, 2000);
            });
        });
    </script>
</body>
</html>
